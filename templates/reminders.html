{% extends "base.html" %}
{% block title %}Reminder Preferences{% endblock %}
{% block content %}
  <div class="mx-auto flex w-full max-w-4xl flex-col gap-6 py-8">
    <section class="space-y-4 rounded-3xl border border-slate-200 bg-white/90 p-6 shadow-sm">
      <div class="space-y-1">
        <p class="text-xs font-semibold uppercase tracking-wide text-slate-400">Set your cadence</p>
        <h1 class="text-2xl font-bold text-slate-900">Reminder preferences</h1>
        <p class="text-sm text-slate-600">
          Control how quickly Mindloom nudges you back into motion, how long snoozes last, and how frequently it checks in on an active task.
          Hover over or tap any help icon to learn what each option does, and use the sample buttons to try prebuilt flows.
        </p>
      </div>
      <div class="grid gap-4 sm:grid-cols-2">
        <label class="flex flex-col gap-1 text-xs text-slate-500">
          Idle before momentum reminder
          <div class="flex items-center gap-2">
            <input
              data-reminder-setting="momentumThresholdMinutes"
              type="number"
              min="5"
              step="5"
              placeholder="90"
              class="w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-400 focus:outline-none"
            />
            <button
              type="button"
              data-help-key="momentumThresholdMinutes"
              class="h-8 w-8 rounded-full border border-slate-200 bg-slate-50 text-xs font-semibold text-slate-600 transition hover:border-slate-300 hover:bg-white"
            >
              ?
            </button>
          </div>
          <span class="text-slate-400">minutes</span>
        </label>
        <label class="flex flex-col gap-1 text-xs text-slate-500">
          Momentum snooze duration
          <div class="flex items-center gap-2">
            <input
              data-reminder-setting="momentumSnoozeMinutes"
              type="number"
              min="1"
              step="1"
              placeholder="30"
              class="w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-400 focus:outline-none"
            />
            <button
              type="button"
              data-help-key="momentumSnoozeMinutes"
              class="h-8 w-8 rounded-full border border-slate-200 bg-slate-50 text-xs font-semibold text-slate-600 transition hover:border-slate-300 hover:bg-white"
            >
              ?
            </button>
          </div>
          <span class="text-slate-400">minutes after snooze</span>
        </label>
        <label class="flex flex-col gap-1 text-xs text-slate-500">
          Check-in min delay
          <div class="flex items-center gap-2">
            <input
              data-reminder-setting="checkinMinMinutes"
              type="number"
              min="5"
              step="5"
              placeholder="20"
              class="w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-400 focus:outline-none"
            />
            <button
              type="button"
              data-help-key="checkinMinMinutes"
              class="h-8 w-8 rounded-full border border-slate-200 bg-slate-50 text-xs font-semibold text-slate-600 transition hover:border-slate-300 hover:bg-white"
            >
              ?
            </button>
          </div>
          <span class="text-slate-400">minutes between check-ins</span>
        </label>
        <label class="flex flex-col gap-1 text-xs text-slate-500">
          Check-in max delay
          <div class="flex items-center gap-2">
            <input
              data-reminder-setting="checkinMaxMinutes"
              type="number"
              min="5"
              step="5"
              placeholder="40"
              class="w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-400 focus:outline-none"
            />
            <button
              type="button"
              data-help-key="checkinMaxMinutes"
              class="h-8 w-8 rounded-full border border-slate-200 bg-slate-50 text-xs font-semibold text-slate-600 transition hover:border-slate-300 hover:bg-white"
            >
              ?
            </button>
          </div>
          <span class="text-slate-400">minutes before a late check-in</span>
        </label>
        <label class="flex flex-col gap-1 text-xs text-slate-500">
          Completion cooldown
          <div class="flex items-center gap-2">
            <input
              data-reminder-setting="completionCooldownMinutes"
              type="number"
              min="1"
              step="1"
              placeholder="5"
              class="w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 focus:border-indigo-400 focus:outline-none"
            />
            <button
              type="button"
              data-help-key="completionCooldownMinutes"
              class="h-8 w-8 rounded-full border border-slate-200 bg-slate-50 text-xs font-semibold text-slate-600 transition hover:border-slate-300 hover:bg-white"
            >
              ?
            </button>
          </div>
          <span class="text-slate-400">minutes before replaying a completion prompt</span>
        </label>
      </div>
      <div class="mt-4 flex flex-wrap items-center gap-3">
        <p class="text-xs font-semibold uppercase tracking-wide text-slate-400">Sample configs</p>
        <button
          type="button"
          data-sample-config="gentle"
          data-sample-config-label="Gentle flow"
          class="rounded-full border border-indigo-200 bg-indigo-50 px-4 py-2 text-xs font-semibold text-indigo-700 transition hover:border-indigo-300 hover:bg-indigo-100"
        >
          Gentle flow
        </button>
        <button
          type="button"
          data-sample-config="focused"
          data-sample-config-label="Focused sprint"
          class="rounded-full border border-emerald-200 bg-emerald-50 px-4 py-2 text-xs font-semibold text-emerald-700 transition hover:border-emerald-300 hover:bg-emerald-100"
        >
          Focused sprint
        </button>
        <button
          type="button"
          data-sample-config="sprint"
          data-sample-config-label="Sprint burst"
          class="rounded-full border border-rose-200 bg-rose-50 px-4 py-2 text-xs font-semibold text-rose-700 transition hover:border-rose-300 hover:bg-rose-100"
        >
          Sprint burst
        </button>
      </div>
      <p class="mt-3 text-xs text-slate-500">
        Settings sync locally. If you need to bounce back later, the customized reminders stay until you tweak them again.
      </p>
    </section>
    <section class="rounded-3xl border border-slate-200 bg-slate-50/80 p-6 text-sm text-slate-700 shadow-sm">
      <p class="text-xs font-semibold uppercase tracking-wide text-slate-400">Help</p>
      <p class="mt-2 text-sm text-slate-600">
        Tap any question mark to see a quick explanation. Use the sample configs above to preview how different cadences feel, and keep “Stop for now” or snoozes ready from the home page when you want to pause nudges.
      </p>
    </section>
  </div>
  <div
    id="reminderHelpPopup"
    class="hidden fixed bottom-4 right-4 max-w-sm rounded-2xl border border-slate-200 bg-white p-4 shadow-lg"
    role="dialog"
    aria-live="polite"
  >
    <p id="reminderHelpContent" class="text-sm text-slate-700"></p>
    <button
      type="button"
      data-close-help
      class="mt-3 inline-flex items-center gap-1 text-xs font-semibold text-indigo-600"
    >
      Close
    </button>
  </div>
{% endblock %}
